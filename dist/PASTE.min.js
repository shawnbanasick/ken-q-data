!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}({6:function(t,e){!function(t,e,n){"use strict";t.stageDataPqmethod=function(){var n,a,r;n=t.pullStatementsIntoAnalysis("statementsInputBoxPqmethod"),e.setState("qavCurrentStatements",n);for(var o=0;o<n.length;o++)a=n[o],$("#existingDatabaseStatementList").append("<li>"+a+"</li>");r=document.getElementById("sortInputBox").value;var s=t.processTextBoxData(r),i=s[0],l=s[1],u=s[2],c=s[3],m=s[4];e.setState("qavTotalNumberSorts",i),e.setState("totalNumberSorts",i),e.setState("qavProjectName",l),e.setState("qavTotalStatements",u),e.setState("qavOriginalSortSize",u),e.setState("originalSortSize",u),e.setState("qavPyramidShape",c),UTIL.calculateSortTriangleShape(c);var p=t.convertSortsTextToNamesAndSortNumbers(m,u),d=p[0],f=p[1];e.setState("qavRespondentSortsFromDbStored",f);var v=UTIL.checkUniqueName(d);e.setState("qavRespondentNames",v),e.setState("respondentNames",v);for(var S=PRELIMOUT.convertSortsTextToNumbers(f,u),g=0;g<S.length;g++){var I=S[g],h=v[g];$("#existingDatabaseRespondentList").append("<li>"+h+"&nbsp;&nbsp;&nbsp"+I+"</li>")}},t.convertSortsTextToNamesAndSortNumbers=function(t,e){var n=2*e+10,a=[],r=[];return _(t).forEach(function(t){if(t.length){var e=t.slice(0,8);a.push(e);var o=t.slice(10,n);r.push(o)}}).value(),[a,r]},t.processTextBoxData=function(e){var n=e.split(/\r\n|\r|\n/g),a=n.slice(0,n.length),r=a.shift(),o=a.shift(),s=parseInt(r.slice(3,6)),i=parseInt(r.slice(6,9)),l=r.slice(10,70),u=l.trim(),c=t.sanitizeProjectName(u),m=o.replace(/\s\s/g," "),p=m.split(" "),d=p.map(Number);return[s,c,i,d.slice(3,d.length),a]},t.pullStatementsIntoAnalysis=function(t){var e=document.getElementById(t).value,n=e.trim(),a=n.split(/\r\n|\r|\n/g);if(a.length<2){console.log("no statements uploaded for PQMethod format file");var r=$("#genericErrorModal .errorPanel");return r.empty(),r.append("<p>Please add Q-sort statements before staging PQMethod data</p><br>"),VIEW.showGenericErrorModal(),"error"}var o=[];return $.each(a,function(){var t=UTIL.sanitizeUserInputText(this);o.push($.trim(t))}),o},t.pullProjectNameIntoAnalysis=function(t){return document.getElementById(t).value},t.sanitizeProjectName=function(t){return""===t?"_":t.replace(/[^a-zA-Z0-9.-]/g,function(){return"_"})},t.filePickedTextPQM=function(t){var e=t.target.files[0],n=new FileReader;n.onload=function(t){var e=t.target.result;$("#sortInputBox").val(e),localStorage.setItem("sortInputBox",e)},n.readAsText(e,"ASCII")},t.filePickedTextSTA=function(t){var e=t.target.files[0],n=new FileReader;n.onload=function(t){var e=t.target.result;$("#statementsInputBoxPqmethod").val(e),localStorage.setItem("qavStatementsInputBoxPqmethod",e)},n.readAsText(e,"ASCII")},function(){document.getElementById("statementsInputBoxPqmethod").value=localStorage.getItem("qavStatementsInputBoxPqmethod"),$("#statementsInputBoxPqmethod").on("input propertychange change",function(){localStorage.setItem("qavStatementsInputBoxPqmethod",this.value)})}()}(window.PASTE=window.PASTE||{},QAV)}});